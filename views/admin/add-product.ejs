<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your view product</title>

    <!-- Link your CSS file here -->
    <link rel="stylesheet" type="text/css" href="/css/main.css">

    <!-- Additional styles or CDN links can be added here if needed -->
    <style>
        .error-message {
          color: red;
          font-size: 14px;
          margin-top: 5px;
        }

        .success-message {
          color: green;
          font-size: 14px;
          margin-top: 5px;
        }
      </style>
</head>
<body>

<%- include('partials/header') %>
  <%- include('partials/aside-nav') %>
    <main class="main-wrap">
     
    <section class="content-main">
        
      <form action="/admin/add-product" method="POST" onsubmit="return validateForm()">
            <div class="row">
                <div class="col-9">
                    <div class="content-header">
                        <h2 class="content-title">Add New Product</h2>
                    </div>
                </div>
                <div class="col-lg-12">
                    <div class="card mb-4">
                        <div class="card-body">
                            <div class="mb-4">
                                <label for="product_title" class="form-label">Product title</label>
                                <input type="text" placeholder="Type here" class="form-control" id="product_title" name="product_title">
                                <div id="titleError" class="error-message"></div>

                            </div>
                            <div class="row gx-3">
                                <div class="col-md-4 mb-3">
                                    <label for="product_category" class="form-label">Product Category</label>
                                    <select class="form-control custom-select" id="product_category" name="product_category">
                                        <option value="">Select Category</option>
                                        <% categories.forEach(category => { %>
                                            <option value="<%= category.name %>"><%= category.name %></option>
                                        <% }); %>
                                    </select>
                                    <div id="categoryError" class="error-message"></div>

                                </div>
                                
                                <div class="col-md-4 mb-3">
                                    <label for="sub_category" class="form-label">Product Subcategory</label>
                                    <select class="form-control custom-select" id="sub_category" name="subcategory">
                                        <option value="">Select Subcategory</option>
                                        <% subcategories.forEach(subcategory => { %>
                                                <option value="<%= subcategory.name %>"><%= subcategory.name %></option>
                                            <% }); %>
                                        
                                    </select>
                                    <div id="subCategoryError" class="error-message"></div>

                                </div>
                                
                                <div class="col-md-4  mb-3">
                                    <label for="product_color" class="form-label">Color</label>
                                    <select class="form-control custom-select" id="product_color" name="color">
                                        <option value="">Select a color</option>
                                        <option value="white">White</option>
                                        <option value="black">Black</option>
                                        <option value="orange">Orange</option>
                                        <option value="red">Red</option>
                                        <option value="yellow">Yellow</option>
                                        <option value="green">Green</option>
                                        <option value="blue">Blue</option>
                                      </select>
                                      <div id="colorError" class="error-message"></div>

                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label d-block">Sizes</label>
                                    <div class="d-inline-block me-2">
                                      <input type="checkbox" class="form-check-input" name="sizes[]" value="S">
                                      <label class="form-check-label">S</label>
                                    </div>
                                    <div class="d-inline-block me-2">
                                      <input type="checkbox" class="form-check-input" name="sizes[]" value="M">
                                      <label class="form-check-label">M</label>
                                    </div>
                                    <div class="d-inline-block me-2">
                                      <input type="checkbox" class="form-check-input" name="sizes[]" value="L">
                                      <label class="form-check-label">L</label>
                                    </div>
                                    <div class="d-inline-block">
                                      <input type="checkbox" class="form-check-input" name="sizes[]" value="XL">
                                      <label class="form-check-label">XL</label>
                                    </div>
                                    <div id="sizeError" class="error-message"></div>

                                  </div>
                                  
                            </div>
                            <div class="mb-4">
                                <label for="brand" class="form-label">Brand</label>
                                <select class="form-control custom-select" id="brand" name="brand">
                                    <option value="">Select Brand</option>
                                    <option value="Glamour">Glamour</option>
                                    <option value="Adidas">Adidas</option>
                                    
                                  </select>
                                  <div id="brandError" class="error-message"></div>

                            </div>
                            <div class=" mb-4">
                                    <div>
                                        <label class="form-label">Description</label>
                                        <textarea placeholder="Type here" class="form-control" rows="4" id="description" name="description"></textarea>
                                        <div id="descriptionError" class="error-message"></div>
        
                                    </div>
                            </div>
                            <div class="mb-4">
                                    <div>
                                        <label class="form-label">Images</label>
                                        <input class="form-control" type="file" name="images[]">
                                        <div id="imagesError" class="error-message"></div>
        
                                    </div>
                            </div>
                            <div class="mb-4">
                                    <div class="mb-4">
                                        <label class="form-label">Price</label>
                                        <input type="text" placeholder="Type here" class="form-control" name="price">
                                        <div id="priceError" class="error-message"></div>

                                    </div>
                                    
                                    <hr>
                                    
                                    
                            </div>
                            <div class="mb-4">
                                <label for="images" class="form-label">Images (3 images max)</label>
                                <input class="form-control" type="file" id="images" name="mimages[]" multiple accept="image/*" onchange="validateFileInput()">
                                <input class="form-control" type="file" id="images" name="mimages[]" multiple accept="image/*" onchange="validateFileInput()">
                                <input class="form-control" type="file" id="images" name="mimages[]" multiple accept="image/*" onchange="validateFileInput()">
                                <div id="imageValidationError" class="error-message"></div>
                            </div>
                            
                            
                              <div class="mb-4">
                                <label for="stock" class="form-label">Stock</label>
                                <input type="number" class="form-control" id="stock" name="stock">
                              </div>
                        </div>
                    </div> 
                </div>
                
                <div>
                            
                    <button class="btn btn-md rounded font-sm hover-up">Add Product</button>
                </div>
            </div>
        </form>
    </section>
    <footer class="main-footer font-xs">
        <div id="message" class="alert <% if (typeof successMessage !== 'undefined') { %>alert-success<% } else if (typeof errorMessage !== 'undefined') { %>alert-danger<% } %>" role="alert">
            <% if (typeof successMessage !== 'undefined') { %>
                <%= successMessage %>
            <% } else if (typeof errorMessage !== 'undefined') { %>
                <%= errorMessage %>
            <% } %>
        </div>
    </footer>
    
    
    </main>
    <script>
        function validateFileInput() {
            const input = document.getElementById('images');
            const files = input.files;
            const maxFiles = 3;
    
            const imageValidationError = document.getElementById('imageValidationError');
            imageValidationError.innerHTML = '';
    
            if (files.length > maxFiles) {
                imageValidationError.innerHTML = 'You can only upload up to 3 images.';
                input.value = ''; // Clear the file input
            }
        }
    </script>
    
    <script>
        function validateForm() {
            const productTitle = document.getElementById('product_title').value.trim();
            const productCategory = document.getElementById('product_category').value;
            const subCategory = document.getElementById('sub_category').value;
            const description = document.getElementById('description').value.trim();
            const images = document.querySelector('input[type="file"]').files;
            const productColor = document.getElementById('product_color').value;
            const sizes = document.querySelectorAll('input[name="sizes[]"]:checked');
            const brand = document.getElementById('brand').value;
            const price = document.getElementsByName('price')[0].value.trim(); 


            const titleError = document.getElementById('titleError');
            const categoryError = document.getElementById('categoryError');
            const subCategoryError = document.getElementById('subCategoryError');
            const descriptionError = document.getElementById('descriptionError');
            const imagesError = document.getElementById('imagesError');
            const colorError = document.getElementById('colorError');
            const sizeError = document.getElementById('sizeError');
            const brandError = document.getElementById('brandError');
            const priceError = document.getElementById('priceError');


            colorError.innerHTML = '';
            titleError.innerHTML = '';
            categoryError.innerHTML = '';
            subCategoryError.innerHTML = '';
            descriptionError.innerHTML = '';
            imagesError.innerHTML = '';
            sizeError.innerHTML = '';
            brandError.innerHTML = '';
            priceError.innerHTML = '';

            let isValid = true;

            if (!productTitle) {
                titleError.innerHTML = 'Product title is required';
                isValid = false;
            }

            

            if (!productCategory) {
                categoryError.innerHTML = 'Product category is required';
                isValid = false;
            }

            if (!subCategory) {
                subCategoryError.innerHTML = 'Product subcategory is required';
                isValid = false;
            }

            if (!description) {
                descriptionError.innerHTML = 'Description is required';
                isValid = false;
            }

            if (images.length === 0) {
                imagesError.innerHTML = 'Images are required';
                isValid = false;
            }

            if (!productColor || productColor === '') {
                colorError.innerHTML = 'Please select a color';
                isValid = false;
            }

            if (sizes.length === 0) {
            sizeError.innerHTML = 'Please select at least one size';
            isValid = false;
            }

            if (!brand) {
                brandError.innerHTML = 'Brand is required';
                isValid = false;
            }

            if (!price || isNaN(parseFloat(price))) {
            priceError.innerHTML = 'Price must be a valid number';
            isValid = false;
            }

            return isValid;
        }

        setTimeout(() => {
        document.getElementById('message').style.display = 'none';
    }, 5000);
    </script>
    </body>

    </html>
    
    


